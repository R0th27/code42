# Part 1 Partitioning

## Partitioning

```
sda is 30.8GB 											type is disk
├── sda1 is mounted at boot with 500 MB					type is part
├── sda2 is 1KB											type is part
├── sda5 is 30.3GB										type is part
	├── sda5_crypt is 30.3GB crypted					type is crypt
	├── LVMGroup-root is 10G mounted at root			type is lvm
	├── LVMGroup-swap is 2.3G moutned as [SWAP]			type is lvm
	├── LVMGroup-home is 5G mounted at /home			type is lvm
	├── LVMGroup-var is 3G mounted at /var				type is lvm
	├── LVMGroup-srv is 3G mounted at /srv				type is lvm
	├── LVMGroup-tmp is 3G mounted at /tmp				type is lvm
	├── LVMGroup-var--log is 4G mounted at /var/log		type is lvm
sr0	is 1024MB											type is rom

```

we can detemine the appropriate size for each partition to ensure proper operation

At start up we should run

- Rocky - SELinux -no KDump

- Debian - AppArmor

## Questions so far

1. what is debain and rocky and their differences

2. what is SELinux and AppArmor

3. how to set them up

4. what are the purposes of each partitions 

5. minimum storage for them to function properly

6. part, lvm and crypt and rom

7. How to set them up during OS installation

8. or after OS

9. what is aptitude and apt

## Notes

### debian vs rocky

debian 

* community driven with flexibility

* uses deb and apt for package managements

* more used in personal and servers

rocky

* RHEL rebuild with statbility

* uses rpm and dnf for package managements

* more used in production servers

rocky is rebuild version of RHEL

### SELinux and AppArmor

	both are Mandatory Access Control (MAC) systems

Mandatory Access Control (MAC) systems

SELinux

* context based rules with labels on file and process

* more complex but maximum security

Apparmor

* path based rules with process and file paths

* more simpler but less security

### What are the purposes of each partitions

1. /dev/ and sda sdb sdc

	* /dev/ the directory where Linux stores device files, representing hardware

	* sd -> SCSI Disk

	* a -> the first disk detected by the system

	* a b c is ordered according to hardware order or Universally Unique Identifier (UUID)

2. each partitions

	* `sda1` is a partition for **boot loader and essential files to start Linux**

	* `sda2` is a partition for **tiny placeholder partition for alignment or for BIOS/EFI boot purposes.

	* `sda5` is a partition and it is crypted

	* `sda5_crypt` means whole `sda5` is encrypted to forbid access by removing the disk and reading it without a key

	* `part` partition

	* `crypt` encrypted volume

	* `lvm` logical volume inside LVM

	* `rom` read-only memory

3. LVM and their contents and safe size

	*  `/` the top of the file system

		* /bin /sbin /lib /etc package manager, core system files

		* safe: 8 - 10 GB

	* `/home` user's personal files and settings

		* user files, configs, browser cache

		* safe: 5 GB

	* `/swap` to handle overflow

		* 4 GB < RAM 4 GB> 2GB < RAM 8 GB> 1 GB

		* safe: 2 GB

	* `/var` variable like logs, databases, emails, caches

		* package cache, databases, spool files, systemd runtime data

		* safe: 2 - 3 GB

	* `/srv` data for network services

		* server data (web, ftp, git, etc)

		* safe: 2 - 5 GB

	* `/tmp` temporary files

		* temp files, compiler temp, installer temp data

		* safe: 1 - 2 GB

	* `/var/log` logs generated by the system and applications

		* system logs, kernel logs, journal logs

		* safe 2 - 4 GB

		* critical to prevent log DoS

### aptitude vs apt

1. apt

	* simple syntax

	* clear output

	* weak dependency conflict resolution

	* conflicts -> "held broken packages"

2. aptitude

	* powerful dependecy solving

	* suggests multiple solutions

	* can resolve "dependency hell"

	* slower

	* less predictable

### startup check

systemctl list-unit-files --state=enabled
ls ~/.config/autostart/
ls /etc/xdg/autostart/
crontab -l
systemctl list-timers

# Command to confirm the setup

### disks, CPU and RAM

`lsblk` **disk partitions**

`cat /etc/fstab` **disk UID verify**

`df -hT` **disk free**

`free -h` **ram free**

### architectural 

`ls /sys/firmware/efi` **efi or bios**

`uname -a` **architecture**

`lsb_release -a` **release info**

### hostname

`hostname` **to check hostname**

### connectivity

`ip a` **L2 + L3**

`ip route` **routing table**

`ip link` **L2 table**

`timedatectl` **date time status**

### security

`sudo systemctl status ufw` **firewall active**

`sudo systemctl status apparmor` **apparmor active**

`systemctl list-unit-files | grep apparmor` **security module startup**

`sudo aa-status` **apparmor rules**

`sudo ufw status` **firewall rules**

### to mess with startup

`sudo systemctl disable <service>` 

`sudo systemctl enable <service>`


